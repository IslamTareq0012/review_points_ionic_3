{"version":3,"sources":["../../src/pages/add-review/add-review.module.ts","../../src/pages/add-review/add-review.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AddReviewPage } from './add-review';\n\n@NgModule({\n  declarations: [\n    AddReviewPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AddReviewPage),\n  ],\n})\nexport class AddReviewPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-review/add-review.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams,LoadingController,AlertController } from 'ionic-angular';\nimport { ProfileProvider } from '../../providers/profile/profile'\nimport { ReviewsProvider } from '../../providers/reviews/reviews'\nimport { NativeStorage } from '@ionic-native/native-storage';\nimport { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/observable/fromPromise';\n\nimport { User } from '../../Models/userModel';\nimport { Review } from '../../Models/reviewModel';\n/**\n * Generated class for the AddReviewPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-add-review',\n  templateUrl: 'add-review.html',\n})\nexport class AddReviewPage {\n  invoiceID;\n  productName;\n  productModel;\n  siteID;\n  siteArray=[];\n  siteName;\n  categoryID;\n  categoryArray=[]\n  categoryBool = false;\n  review;\n  reviewData={};\n  sentiment;\n  userData = {} as User;\n  loading = null;\n  userToken;\n  userID:number;\n  detectText:string;\n  constructor(private nativeStorage: NativeStorage, public navCtrl: NavController, private profileProvider: ProfileProvider,private reviewProvider:ReviewsProvider, public loadingCtrl: LoadingController,private alertCtrl:AlertController) {\n  }\n\n  ionViewDidLoad() {\n\n\n    console.log('ionViewDidLoad AddReviewPage');\n    this.showLoading();\n    var subscription = Observable.fromPromise(this.nativeStorage.getItem('token'));\n    subscription.subscribe(token => {\n      console.log(\"token from observable\", token.jwtUserToken);\n      this.profileProvider.getUser(token.jwtUserToken).then(res => {\n        this.userData = res._id;\n        this.userID=res._id\n        this.userToken=token.jwtUserToken\n        console.log(\"User ID\" ,this.userID)\n        this.reviewProvider.GetSites().then(res => {\n          console.log(res);\n          this.siteArray = res;\n        }).catch(err => {\n          console.log(err)\n        });\n        this.dismissLoading();\n      }).catch(err => {\n        console.log(\"error getting user\", err);\n      });\n    },\n      error => {\n        console.log(\"no token\", error);\n      });\n     \n  }\n\n  setSiteValue(siteID){\n    console.log(siteID);\n    if(siteID){\n    this.categoryBool=true\n    this.showLoading()\n    this.reviewProvider.GetCategories(siteID).then(res =>{\n      console.log(res);\n      this.categoryArray=res;\n      this.dismissLoading();\n    }).catch(err =>{\n      console.log(err)\n    })\n  }else{\n    this.categoryBool = false;\n  }\n}\n\n  CheckLanguage(){\n    this.showLoading()\n    this.reviewProvider.DetectLanguage(this.review).then(res => {\n      this.detectText = res.language;\n      console.log(\"Language is \" ,this.detectText)\n      this.reviewProvider.GetSentiment(this.review,this.detectText).then(res => {\n        this.showLoading();\n         \n         if (this.detectText=='en'){\n          this.sentiment=res.probability.pos\n          console.log(\"Score is \" ,this.sentiment)\n         }else if (this.detectText =='ar'){\n           this.sentiment = res.score;\n          console.log(\"Score is \" ,this.sentiment);\n         }else {\n          let alert = this.alertCtrl.create({\n            title: 'Error',\n            subTitle: 'Cannot Define your language please write on Arabic or English',\n            buttons: ['Ok']\n          });\n          alert.present();\n         }\n         for (let i=0;i<this.siteArray.length;i++){\n          if (this.siteID == this.siteArray[i]._id){\n            console.log(this.siteArray[i].siteName);\n            this.siteName=this.siteArray[i].siteName\n            break;\n          }\n         }\n         this.reviewData = {\n          \"invoiceID\": this.invoiceID,\n          \"productName\":this.productName,\n         \"category\":this.categoryID,\n         \"productModel\": this.productModel,\n         \"review\": this.review,\n         \"site\" : this.siteName,\n         \"user\": this.userID,\n         \"sentiment\":this.sentiment\n         }\n         console.log(this.reviewData);\n          this.reviewProvider.AddReview(this.reviewData,this.userToken).then(res => {\n            console.log(res)\n            let alert = this.alertCtrl.create({\n              title: 'Alert',\n              subTitle: 'Thanks for your review',\n              buttons: [\n                {text: 'Ok' ,\n\t  \t          handler: () => {\n                  this.navCtrl.pop();\n              }}]\n            });\n            alert.present();\n            this.dismissLoading();\n          }).catch(err => {\n            let alert = this.alertCtrl.create({\n              title: 'Error',\n              subTitle: 'Sorry please try again Later',\n              buttons: ['Ok']\n            });\n            alert.present();\n             console.log(\"error adding Review \", err);    \n          })\n       }).catch(err => {\n        let alert = this.alertCtrl.create({\n          title: 'Error',\n          subTitle: 'Cannot Get score of sentiment',\n          buttons: ['Ok']\n        });\n        alert.present();\n         console.log(\"error getting score \", err);\n       });\n    }).catch(err => {\n      let alert = this.alertCtrl.create({\n        title: 'Error',\n        subTitle: 'Cannot Define your language please write on Arabic or English',\n        buttons: ['Ok']\n      });\n      alert.present();\n      this.dismissLoading()\n      console.log(\"error detecting Language\", err);\n    });\n}\n\n  \n  AddReview(){\n    console.log(this.detectText);\n    console.log(\"ssss0\",this.CheckLanguage());\n    console.log(this.sentiment);\n    console.log(this.invoiceID);\n    console.log(this.productModel);\n    console.log(this.productName);\n    console.log(this.siteID);\n    console.log(this.categoryID);\n    console.log(this.review);\n  }\n  showLoading() {\n    if (!this.loading) {\n      this.loading = this.loadingCtrl.create({\n        spinner: 'dots',\n        content: 'Loading...'\n      });\n      this.loading.present();\n    }\n  }\n  dismissLoading() {\n    if (this.loading) {\n      this.loading.dismiss();\n      this.loading = null;\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-review/add-review.ts"],"sourceRoot":""}