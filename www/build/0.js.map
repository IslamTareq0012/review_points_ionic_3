{"version":3,"sources":["../../src/pages/profile/profile.module.ts","../../src/pages/profile/profile.ts","../../src/pipes/long-date/long-date.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ProfilePage } from './profile';\r\nimport { LongDatePipe } from '../../pipes/long-date/long-date';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ProfilePage,\r\n    LongDatePipe\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ProfilePage),\r\n  ],\r\n})\r\nexport class ProfilePageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, LoadingController } from 'ionic-angular';\r\nimport { ProfileProvider } from '../../providers/profile/profile'\r\nimport { NativeStorage } from '@ionic-native/native-storage';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport 'rxjs/add/observable/fromPromise';\r\n\r\nimport { User } from '../../Models/userModel';\r\nimport { Review } from '../../Models/reviewModel';\r\n/**\r\n * Generated class for the ProfilePage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-profile',\r\n  templateUrl: 'profile.html',\r\n})\r\nexport class ProfilePage {\r\n  tabBarElement: any;\r\n  userData: any;\r\n  reviewsData: Review[];\r\n  imageUrl;\r\n  loading = null;\r\n  totalPoints;\r\n  constructor(private nativeStorage: NativeStorage, public navCtrl: NavController, private profileProvider: ProfileProvider, public loadingCtrl: LoadingController) {\r\n    this.imageUrl = \"http://localhost:3000/images/\";\r\n    this.userData = {} as User;\r\n    this.reviewsData = [];\r\n    this.totalPoints = 0;\r\n  }\r\n  ionViewWillEnter() {\r\n    this.tabBarElement.style.display = 'none';\r\n\r\n  }\r\n\r\n  ionViewWillLeave() {\r\n    this.tabBarElement.style.display = 'flex';\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad ProfilePage');\r\n    this.tabBarElement = document.querySelector('.tabbar.show-tabbar');\r\n    console.log(\"tabs element\", this.tabBarElement);\r\n    this.showLoading();\r\n    var subscription = Observable.fromPromise(this.nativeStorage.getItem('token'));\r\n    subscription.subscribe(token => {\r\n\r\n      console.log(\"token from observable\", token.jwtUserToken);\r\n      this.profileProvider.getUser(token.jwtUserToken).then(res => {\r\n        var Points = 0;\r\n        for (var i = 0; i < res.points.length; i++) {\r\n          Points = Points + res.points[i].sitePoints;\r\n        }\r\n        this.totalPoints = Points;\r\n        this.userData = res;\r\n        this.profileProvider.getUserReviews(token.jwtUserToken).then(res => {\r\n          this.reviewsData = res;\r\n          this.dismissLoading();\r\n        }).catch(err => {\r\n          console.log(\"getting user reviews error\", err);\r\n        })\r\n      }).catch(err => {\r\n        console.log(\"error getting user\", err);\r\n      });\r\n    },\r\n      error => {\r\n        console.log(\"no token\", error);\r\n      });\r\n  }\r\n\r\n  showLoading() {\r\n    if (!this.loading) {\r\n      this.loading = this.loadingCtrl.create({\r\n        spinner: 'dots',\r\n        content: 'Loading...'\r\n      });\r\n      this.loading.present();\r\n    }\r\n  }\r\n  dismissLoading() {\r\n    if (this.loading) {\r\n      this.loading.dismiss();\r\n      this.loading = null;\r\n    }\r\n  }\r\n  editProfileNav() {\r\n    this.navCtrl.push('EditProfilePage', this.userData);\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.ts","import { Pipe, PipeTransform } from '@angular/core';\nimport moment from 'moment';\n\n/**\n * Generated class for the LongDatePipe pipe.\n *\n * See https://angular.io/api/core/Pipe for more info on Angular Pipes.\n */\n@Pipe({\n  name: 'longDate',\n})\nexport class LongDatePipe implements PipeTransform {\n  /**\n   * Takes a value and makes it lowercase.\n   */\n  transform(value: string, ...args) {\n    return moment(value).format(\"MMMM Do YYYY, h:mm:ss a\").toString();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/long-date/long-date.ts"],"sourceRoot":""}